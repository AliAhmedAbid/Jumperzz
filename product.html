<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jumperzz Product Details</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <style>
        #product-footer {
            background-color: #222;
            color: white;
            padding: 20px;
            text-align: center;
            margin-top: 50px;
        }

        #buyInstructions {
            margin-top: 1.5rem;
            display: none;
        }

        #product-article-box {
            background-color: #fff3cd;
            /* yellow-ish */
            border: 1px solid #ffeeba;
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
            font-weight: bold;
            color: #856404;
        }

        /* Default blue style is inline, but we define the green and checkmark styles here */

#buyButton.added {
  background-color: #22c55e !important; /* green */
  color: transparent !important;       /* hide the original text */
  pointer-events: none;                 /* disable button during animation */
  position: relative;
}

#buyButton.added::after {
  content: "✔";                        /* checkmark */
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.5rem;
  color: white;                       /* checkmark color */
}


/* Optional smooth transition */
#buyButton {
  transition: background-color 0.3s ease, color 0.3s ease;
}

    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <a href="index.html">
                <img src="images/Reallogo (1).png" alt="Jumperzz Logo" />
            </a>
        </div>

        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="products.html">Our Products</a>
            <a href="#aboutus">About Us</a>
        </div>

        <!-- Profile and Cart Icons -->
        <div class="nav-icons">
            <button class="nav-icon-btn" aria-label="Profile">
                <i class="fa-solid fa-user"></i>
            </button>
            <button class="nav-icon-btn" aria-label="Cart">
                <i class="fa-solid fa-cart-shopping"></i>
            </button>
        </div>
    </nav>

   



    <!-- Cart Panel Script -->
  <script>
    const cartPanel = document.getElementById('cartPanel');
    const openCartBtn = document.getElementById('openCartBtn');
    const closeCartBtn = document.getElementById('closeCartBtn');

    openCartBtn.addEventListener('click', () => {
      cartPanel.setAttribute('aria-hidden', 'false');
      cartPanel.classList.add('visible');
    });

    closeCartBtn.addEventListener('click', () => {
      cartPanel.setAttribute('aria-hidden', 'true');
      cartPanel.classList.remove('visible');
    });
  </script>

<script src="script.js"></script>

 <!-- Cart Side Panel -->
  <aside id="cartPanel" class="side-panel" aria-hidden="true">
  <button id="closeCartBtn" class="close-btn" aria-label="Close Cart">&times;</button>
  <h2>Your Cart</h2>
  <div id="cartItems" class="cart-items">
    <!-- Cart products will be injected here -->
  </div>
  <button id="checkoutBtn" class="checkout-btn">Checkout</button>
</aside>

    
    <section id="product-details" class="product-details"
        style="max-width: 1000px; margin: 3rem auto; display: flex; flex-wrap: wrap; gap: 2rem; padding: 0 1rem;">
        <div style="flex: 1 1 400px; min-width: 300px;">
            <img id="product-img" src="images/jumper1.jpg" alt="Product Image" style="width: 100%; border-radius: 12px;" />
        </div>
        <div style="flex: 1 1 400px; min-width: 300px;">
            <h1 id="product-name">Loading...</h1>
            <p id="product-desc"></p>
            <p style="font-weight: 700; font-size: 1.5rem;" id="product-price"></p>

          
            <button id="buyButton"
                style="background-color: #3b82f6; color: white; padding: 1rem 2rem; font-weight: 700; font-size: 1.2rem; border: none; border-radius: 9999px; cursor: pointer;">
                add to cart
            </button>

            <!-- Buy Instructions Container -->
            <div id="buyInstructions">
                <p style="margin-top: 1rem; font-size: 0.95rem; color: #333;">
                    To order, click the button above to go to Instagram and send us a DM with the article number below.
                </p>
                <div id="product-article-box">
                    Article Number: <span id="item-number"></span>
                </div>
            </div>
        </div>
    </section>

    <footer id="product-footer">
        <p>&copy; 2025 Jumperzz. All rights reserved.</p>
    </footer>

    <script>
        
        window.addEventListener('DOMContentLoaded', () => {
            const navbar = document.querySelector('.navbar');
            let lastScrollY = window.scrollY;

            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;

                if (currentScrollY > lastScrollY && currentScrollY > 50) {
                    // Scrolling down, hide navbar
                    navbar.classList.add('navbar--hidden');
                } else {
                    // Scrolling up, show navbar
                    navbar.classList.remove('navbar--hidden');
                }

                lastScrollY = currentScrollY;
            });
        });

        // Product loading script
        const urlParams = new URLSearchParams(window.location.search);
        const productIdString = urlParams.get('id');
        const productId = productIdString ? Number(productIdString) : null;

        fetch('products.json')
            .then(res => res.json())
            .then(products => {
                const product = products.find(p => p.id === productId) || products[0];
                document.getElementById('product-name').textContent = product.name;
                document.getElementById('product-desc').textContent = product.description;
                document.getElementById('product-price').textContent = product.price;
                document.getElementById('product-img').src = product.image;
                document.getElementById('product-img').alt = product.name;
                document.getElementById('item-number').textContent = product.itemNumber;

               const buyButton = document.getElementById("buyButton");

buyButton.addEventListener("click", () => {
  
  buyButton.classList.add("added");
  
  
  setTimeout(() => {
    buyButton.classList.remove("added");
  }, 2000);

  
});


            });


            document.addEventListener('DOMContentLoaded', () => {
  // Elements
  const cartBtn = document.querySelector('.nav-icon-btn[aria-label="Cart"]');
  const cartPanel = document.getElementById('cartPanel');
  const closeCartBtn = document.getElementById('closeCartBtn');
  const cartItemsContainer = document.getElementById('cartItems');
  const checkoutBtn = document.getElementById('checkoutBtn');
  const buyButton = document.getElementById('buyButton');

  
  let cartProducts = [
    
   
  ];

  
  function renderCartItems() {
    if (!cartItemsContainer) return;

    cartItemsContainer.innerHTML = "";

    if (cartProducts.length === 0) {
      cartItemsContainer.innerHTML = `<p>Your cart is empty.</p>`;
      checkoutBtn.disabled = true;
      return;
    }

    checkoutBtn.disabled = false;

    cartProducts.forEach(item => {
      const cartItem = document.createElement('div');
      cartItem.className = 'cart-item';

      cartItem.innerHTML = `
        <button class="remove-cart-item remove-btn" aria-label="Remove product">−</button>
        <a href="product.html?id=${item.id}" class="product-link">
          <img src="${item.img}" alt="${item.name}" />
          <div class="product-info">
            <h3>${item.name}</h3>
            <p class="price">${item.price}</p>
            <p>Quantity: ${item.quantity}</p>
          </div>
        </a>
      `;

      
      const removeBtn = cartItem.querySelector('.remove-cart-item');
      removeBtn.addEventListener('click', () => {
        cartProducts = cartProducts.filter(p => p.id !== item.id);
        renderCartItems();
      });

      cartItemsContainer.appendChild(cartItem);
    });
  }

  
  renderCartItems();

 
  if (cartBtn && cartPanel) {
    cartBtn.addEventListener('click', () => {
      cartPanel.classList.add('active');
      cartPanel.setAttribute('aria-hidden', 'false');
    });
  }

 
  if (closeCartBtn && cartPanel) {
    closeCartBtn.addEventListener('click', () => {
      cartPanel.classList.remove('active');
      cartPanel.setAttribute('aria-hidden', 'true');
    });
  }

 
  if (checkoutBtn) {
    checkoutBtn.addEventListener('click', () => {
      if (cartProducts.length === 0) return;
      alert('Thank you for your purchase!');
      cartProducts = [];
      renderCartItems();
      cartPanel.classList.remove('active');
      cartPanel.setAttribute('aria-hidden', 'true');
    });
  }

  // === Add product to cart when Buy button clicked ===
  buyButton.addEventListener('click', () => {
    // Extract product info from the product details section
    // Try to get the product ID from URL query param "id"
    const urlParams = new URLSearchParams(window.location.search);
    const productId = parseInt(urlParams.get('id')) || Date.now(); // fallback unique ID
    
    const productName = document.getElementById('product-name').textContent.trim();
    const productPrice = document.getElementById('product-price').textContent.trim();
    const productImg = document.getElementById('product-img').src;

   
const existingProduct = cartProducts.find(p => p.id === productId);

if (existingProduct) {
  existingProduct.quantity++;
} else {
  cartProducts.push({
    id: productId,
    name: productName,
    price: productPrice,
    img: productImg,
    quantity: 1
  });
}

localStorage.setItem("cart", JSON.stringify(cartProducts));
    renderCartItems();


renderCartItems();


    
    if (cartPanel) {
      cartPanel.classList.add('active');
      cartPanel.setAttribute('aria-hidden', 'false');
    }
  });
});

    </script>
</body>

</html>
